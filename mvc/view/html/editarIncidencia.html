{% extends "prueba.html" %}

{% block main %} 
<h2 class="editIncidencia">Editar incidencia</h2>

<div class="row">
    <div class="col">
        <form action="editarIncidenciaController.php" class="nueva-incidencia p-0" method="post">
            <h2>Estado de la incidencia</h2>
            <div id="informacionIncidencia" class="d-flex flex-wrap justify-content-start">
                <div class="form-check">
                    <input type="radio" name="estadoIncidencia" value="pendiente" 
                    {{datosIncidencia.estado == 'pendiente' ? 'checked' : ''}}
                    {{datosUsuario.rol != 'administrador' ? 'disabled' : ''}}>
                    <label class="form-check-label m-0">
                        Pendiente
                    </label>
                </div>
                <div class="form-check">
                    <input type="radio" name="estadoIncidencia" value="comprobada"
                    {{datosIncidencia.estado == 'comprobada' ? 'checked' : ''}}
                    {{datosUsuario.rol != 'administrador' ? 'disabled' : ''}}>
                    <label class="form-check-label m-0">
                        Comprobada
                    </label>
                </div>
                <div class="form-check">
                    <input type="radio" name="estadoIncidencia" value="tramitada"
                    {{datosIncidencia.estado == 'tramitada' ? 'checked' : ''}}
                    {{datosUsuario.rol != 'administrador' ? 'disabled' : ''}}>
                    <label class="form-check-label m-0">
                        Tramitada
                    </label>
                </div>
                <div class="form-check">
                    <input type="radio" name="estadoIncidencia" value="irresoluble"
                    {{datosIncidencia.estado == 'irresoluble' ? 'checked' : ''}}
                    {{datosUsuario.rol != 'administrador' ? 'disabled' : ''}}>
                    <label class="form-check-label m-0">
                        Irresoluble
                    </label>
                </div>
                <div class="form-check ">
                    <input type="radio" name="estadoIncidencia" value="resuelta"
                    {{datosIncidencia.estado == 'resuelta' ? 'checked' : ''}}
                    {{datosUsuario.rol != 'administrador' ? 'disabled' : ''}}>
                    <label class="form-check-label m-0">
                        Resuelta
                    </label>
                </div>
            </div>
            <div class="d-flex justify-content-center pb-1 mt-2">
                <input class="m-auto" type="submit" value="Modificar estado" name="modificarEstado"
                {{datosUsuario.rol != 'administrador' ? 'disabled' : ''}}>
            </div>
        </form>
    </div>
</div>
{% block incidencia %}

{% endblock %}

<div class="nueva-incidencia">
    <h2>Fotografías adjuntas:</h2>
    <div id="informacionIncidencia">
        <form action="" class="nueva-incidencia" method="post" enctype="multipart/form-data">
            <div class="row d-flex flex-column">
                {% for foto in fotos %}
                <div class="col m-3 w-auto">
                    <img class="imgUsuario" src="data:image/jpeg;base64,{{ foto.fotografia }}" alt="Foto actual">
                    <a href="editarIncidenciaController.php?foto={{ foto.id }}" class="icono mr-2">
                        <img class="icono ml-2" src="../view/img/borrar.png" alt="editar">
                    </a>
                </div>
                {% endfor %}
            </div>
            <div class="row">
                <div class="col d-flex justify-content-center">
                    <input type="file" class="color-card me-auto" name="examinar" value="Selecciona una foto">
                </div>
                <div class="col d-flex justify-content-start">
                    <input type="submit" class="mr-2" name="addFoto" value="Añadir foto">
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}